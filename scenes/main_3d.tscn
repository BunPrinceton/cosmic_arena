[gd_scene load_steps=31 format=3 uid="uid://caiwqyhaaige4"]

[ext_resource type="Texture2D" uid="uid://bad677qsbjcue" path="res://assets/textures/greyish-green-mossy-rock.jpg" id="1_bghdn"]
[ext_resource type="Script" path="res://scripts/player_3d.gd" id="1_player"]
[ext_resource type="Texture2D" uid="uid://pjwwk8ccsii5" path="res://assets/textures/grass_mossy.png" id="1_w3v01"]
[ext_resource type="Script" path="res://scripts/camera_3d_follow.gd" id="2_camera"]
[ext_resource type="PackedScene" uid="uid://cxyfdrw5xr1q4" path="res://assets/models/environment/rocks/Rock_1.glb" id="2_dn385"]
[ext_resource type="PackedScene" uid="uid://n52i38jd65on" path="res://assets/models/humanoid/human-female.glb" id="4_pgxgn"]

[sub_resource type="NavigationMesh" id="NavigationMesh_ta7nc"]
agent_height = 1.8
agent_radius = 0.2

[sub_resource type="BoxMesh" id="BoxMesh_ground"]
size = Vector3(60, 0.5, 100)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ground"]
albedo_color = Color(0.452586, 0.452586, 0.452586, 1)
albedo_texture = ExtResource("1_w3v01")
uv1_scale = Vector3(20, 20, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_ground"]
size = Vector3(60, 0.5, 100)

[sub_resource type="BoxMesh" id="BoxMesh_lane"]
size = Vector3(8, 0.6, 100)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_lane"]
albedo_color = Color(0.55, 0.4, 0.25, 1)

[sub_resource type="BoxMesh" id="BoxMesh_backdrop_top"]
size = Vector3(180, 80, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_backdrop"]
albedo_texture = ExtResource("1_bghdn")
uv1_scale = Vector3(10, 5, 5)

[sub_resource type="BoxMesh" id="BoxMesh_backdrop_side"]
size = Vector3(180, 80, 1)

[sub_resource type="BoxMesh" id="BoxMesh_backdrop_floor"]
size = Vector3(360, 1, 160)

[sub_resource type="BoxMesh" id="BoxMesh_wall_side"]
size = Vector3(2, 3, 100)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_wall"]
albedo_color = Color(0.6, 0.7, 0.3, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_wall_side"]
size = Vector3(2, 3, 100)

[sub_resource type="BoxMesh" id="BoxMesh_wall_segment"]
size = Vector3(22.5, 3, 2)

[sub_resource type="BoxShape3D" id="BoxShape3D_wall_segment"]
size = Vector3(22.5, 3, 2)

[sub_resource type="BoxMesh" id="BoxMesh_base"]
size = Vector3(15, 6, 15)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_player_base"]
albedo_color = Color(0.2, 0.6, 1, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_base"]
size = Vector3(15, 6, 15)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_enemy_base"]
albedo_color = Color(1, 0.2, 0.2, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_rstky"]
size = Vector3(10, 3, 3)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_qavsd"]
albedo_texture = ExtResource("1_bghdn")
uv1_scale = Vector3(2, 2, 2)

[sub_resource type="CapsuleMesh" id="CapsuleMesh_player"]
radius = 1.0
height = 4.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_player"]
albedo_color = Color(0.2, 0.6, 0.9, 1)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_player"]
radius = 1.0
height = 4.0

[node name="Main3D" type="Node3D"]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_ta7nc")

[node name="Ground" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.25, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Ground"]
mesh = SubResource("BoxMesh_ground")
surface_material_override/0 = SubResource("StandardMaterial3D_ground")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Ground"]
shape = SubResource("BoxShape3D_ground")

[node name="Lanes" type="Node3D" parent="."]

[node name="LeftLane" type="MeshInstance3D" parent="Lanes"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12, 0, 0)
mesh = SubResource("BoxMesh_lane")
surface_material_override/0 = SubResource("StandardMaterial3D_lane")

[node name="RightLane" type="MeshInstance3D" parent="Lanes"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12, 0, 0)
mesh = SubResource("BoxMesh_lane")
surface_material_override/0 = SubResource("StandardMaterial3D_lane")

[node name="Backdrops" type="Node3D" parent="."]

[node name="TopBackdrop" type="MeshInstance3D" parent="Backdrops"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 40, -55)
mesh = SubResource("BoxMesh_backdrop_top")
surface_material_override/0 = SubResource("StandardMaterial3D_backdrop")

[node name="LeftBackdrop" type="MeshInstance3D" parent="Backdrops"]
transform = Transform3D(0, 0, -1, 0, 1, 0, 1, 0, 0, -35, 40, 0)
mesh = SubResource("BoxMesh_backdrop_side")
surface_material_override/0 = SubResource("StandardMaterial3D_backdrop")

[node name="BottomBackdrop" type="MeshInstance3D" parent="Backdrops"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)
mesh = SubResource("BoxMesh_backdrop_floor")
surface_material_override/0 = SubResource("StandardMaterial3D_backdrop")

[node name="Walls" type="Node3D" parent="."]

[node name="LeftWall" type="StaticBody3D" parent="Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -31, 1.5, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Walls/LeftWall"]
mesh = SubResource("BoxMesh_wall_side")
surface_material_override/0 = SubResource("StandardMaterial3D_wall")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Walls/LeftWall"]
shape = SubResource("BoxShape3D_wall_side")

[node name="RightWall" type="StaticBody3D" parent="Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 31, 1.5, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Walls/RightWall"]
mesh = SubResource("BoxMesh_wall_side")
surface_material_override/0 = SubResource("StandardMaterial3D_wall")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Walls/RightWall"]
shape = SubResource("BoxShape3D_wall_side")

[node name="BottomLeftWall" type="StaticBody3D" parent="Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -18.75, 1.5, 51)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Walls/BottomLeftWall"]
mesh = SubResource("BoxMesh_wall_segment")
surface_material_override/0 = SubResource("StandardMaterial3D_wall")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Walls/BottomLeftWall"]
shape = SubResource("BoxShape3D_wall_segment")

[node name="BottomRightWall" type="StaticBody3D" parent="Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18.75, 1.5, 51)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Walls/BottomRightWall"]
mesh = SubResource("BoxMesh_wall_segment")
surface_material_override/0 = SubResource("StandardMaterial3D_wall")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Walls/BottomRightWall"]
shape = SubResource("BoxShape3D_wall_segment")

[node name="TopLeftWall" type="StaticBody3D" parent="Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -18.75, 1.5, -51)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Walls/TopLeftWall"]
mesh = SubResource("BoxMesh_wall_segment")
surface_material_override/0 = SubResource("StandardMaterial3D_wall")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Walls/TopLeftWall"]
shape = SubResource("BoxShape3D_wall_segment")

[node name="TopRightWall" type="StaticBody3D" parent="Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18.75, 1.5, -51)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Walls/TopRightWall"]
mesh = SubResource("BoxMesh_wall_segment")
surface_material_override/0 = SubResource("StandardMaterial3D_wall")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Walls/TopRightWall"]
shape = SubResource("BoxShape3D_wall_segment")

[node name="Bases" type="Node3D" parent="."]

[node name="PlayerBase" type="StaticBody3D" parent="Bases"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 50)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Bases/PlayerBase"]
mesh = SubResource("BoxMesh_base")
surface_material_override/0 = SubResource("StandardMaterial3D_player_base")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Bases/PlayerBase"]
shape = SubResource("BoxShape3D_base")

[node name="EnemyBase" type="StaticBody3D" parent="Bases"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, -50)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Bases/EnemyBase"]
mesh = SubResource("BoxMesh_base")
surface_material_override/0 = SubResource("StandardMaterial3D_enemy_base")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Bases/EnemyBase"]
shape = SubResource("BoxShape3D_base")

[node name="Obstacles" type="Node3D" parent="."]

[node name="RigidBody3D" type="RigidBody3D" parent="Obstacles"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Obstacles/RigidBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.48608, 0)
shape = SubResource("BoxShape3D_rstky")

[node name="Rock_12" parent="Obstacles/RigidBody3D" instance=ExtResource("2_dn385")]
transform = Transform3D(1.06513, 0, 1.69278, 0, 2, 0, -1.69278, 0, 1.06513, -4.42794, -0.0281084, 0.888975)

[node name="Rock_1" parent="Obstacles/RigidBody3D/Rock_12" index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_qavsd")

[node name="Rock_15" parent="Obstacles/RigidBody3D/Rock_12" instance=ExtResource("2_dn385")]
transform = Transform3D(-0.900585, 0, 0.434681, 0, 1, 0, -0.434681, 0, -0.900585, 0.775426, 9.53674e-07, 1.6943)

[node name="Rock_1" parent="Obstacles/RigidBody3D/Rock_12/Rock_15" index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_qavsd")

[node name="Rock_14" parent="Obstacles/RigidBody3D/Rock_12" instance=ExtResource("2_dn385")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.652769, 0, 1.03742)

[node name="Rock_1" parent="Obstacles/RigidBody3D/Rock_12/Rock_14" index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_qavsd")

[node name="Rock_13" parent="Obstacles/RigidBody3D/Rock_12" instance=ExtResource("2_dn385")]
transform = Transform3D(-0.900585, 0, 0.434681, 0, 1, 0, -0.434681, 0, -0.900585, 0.122657, 9.53674e-07, 0.656879)

[node name="Rock_1" parent="Obstacles/RigidBody3D/Rock_12/Rock_13" index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_qavsd")

[node name="Player" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15, 2, 35)
script = ExtResource("1_player")

[node name="Visual" type="MeshInstance3D" parent="Player"]
visible = false
mesh = SubResource("CapsuleMesh_player")
surface_material_override/0 = SubResource("StandardMaterial3D_player")

[node name="human-female" parent="Player" instance=ExtResource("4_pgxgn")]

[node name="CharacterArmature" parent="Player/human-female" index="0"]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, -1.74113, 0)

[node name="Skeleton3D" parent="Player/human-female/CharacterArmature" index="0"]
bones/0/position = Vector3(0.0188445, 0.867395, -0.0050473)
bones/0/rotation = Quaternion(0.318126, -0.00346245, 0.0481469, 0.946819)
bones/1/rotation = Quaternion(-0.0647028, -1.2402e-07, -1.01848e-08, 0.997905)
bones/2/rotation = Quaternion(-0.00688382, 0.0654388, -0.0257625, 0.9975)
bones/3/rotation = Quaternion(0.193621, 0.20296, 0.0327057, 0.959296)
bones/4/rotation = Quaternion(-0.0653253, -0.141203, -0.00923137, 0.98778)
bones/5/rotation = Quaternion(-0.190842, -0.140247, -0.0188226, 0.971368)
bones/6/rotation = Quaternion(-0.61216, -0.31819, -0.334212, 0.642119)
bones/7/rotation = Quaternion(-0.211089, 0.705078, -0.406735, 0.541177)
bones/8/rotation = Quaternion(0.704091, 0.136565, 0.00954215, 0.696788)
bones/9/rotation = Quaternion(0.0268669, -0.00694171, -0.044334, 0.998631)
bones/10/rotation = Quaternion(0.479236, 0.57657, -0.409345, 0.519938)
bones/11/rotation = Quaternion(0.62305, -0.0191147, -0.0239744, 0.781581)
bones/12/rotation = Quaternion(0.623165, -0.0147982, -0.0185665, 0.78173)
bones/13/rotation = Quaternion(0.448563, 0.552099, -0.441805, 0.546613)
bones/14/rotation = Quaternion(0.623343, 0.000941957, 0.00118481, 0.781947)
bones/15/rotation = Quaternion(0.623342, -0.000705536, -0.000881892, 0.781949)
bones/16/rotation = Quaternion(0.4386, 0.458383, -0.490833, 0.597158)
bones/17/rotation = Quaternion(0.623285, -0.0159695, 0.0200629, 0.781574)
bones/18/rotation = Quaternion(0.623344, 0.000377271, 0.000478444, 0.781947)
bones/19/rotation = Quaternion(0.404778, 0.516138, -0.483328, 0.579785)
bones/20/rotation = Quaternion(0.623341, 7.29821e-06, 9.4127e-06, 0.78195)
bones/21/rotation = Quaternion(0.623341, -0.000664898, -0.000833991, 0.781949)
bones/22/rotation = Quaternion(0.296851, 0.913647, 0.274657, 0.041148)
bones/23/rotation = Quaternion(0.342998, -0.00139713, -0.0768231, 0.936189)
bones/24/rotation = Quaternion(0.657116, -0.0554158, -0.0877024, 0.746617)
bones/26/rotation = Quaternion(-0.599039, 0.342253, 0.359453, 0.628338)
bones/27/rotation = Quaternion(-0.0306716, -0.659449, 0.541661, 0.520375)
bones/28/rotation = Quaternion(0.758251, 0.275498, -0.234658, 0.542303)
bones/29/rotation = Quaternion(0.10159, -0.0348607, 0.0489494, 0.99301)
bones/30/rotation = Quaternion(0.479237, -0.57657, 0.409345, 0.519938)
bones/31/rotation = Quaternion(0.62305, 0.0191174, 0.0239723, 0.781581)
bones/32/rotation = Quaternion(0.623164, 0.0147984, 0.0185666, 0.78173)
bones/33/rotation = Quaternion(0.448564, -0.552099, 0.441805, 0.546613)
bones/34/rotation = Quaternion(0.623342, -0.000939082, -0.00118685, 0.781948)
bones/35/rotation = Quaternion(0.623343, 0.000705732, 0.000881738, 0.781948)
bones/36/rotation = Quaternion(0.438601, -0.458383, 0.490833, 0.597158)
bones/37/rotation = Quaternion(0.623285, 0.0159722, -0.0200648, 0.781575)
bones/38/rotation = Quaternion(0.623345, -0.000377371, -0.000478383, 0.781946)
bones/39/rotation = Quaternion(0.404779, -0.516138, 0.483328, 0.579784)
bones/40/rotation = Quaternion(0.623341, -4.4083e-06, -1.13635e-05, 0.78195)
bones/41/rotation = Quaternion(0.623342, 0.000664931, 0.000834089, 0.781949)
bones/42/rotation = Quaternion(-0.296853, 0.913646, 0.274656, -0.0411511)
bones/43/rotation = Quaternion(0.342997, 0.00139332, 0.0768246, 0.936189)
bones/44/rotation = Quaternion(0.657116, 0.0554157, 0.0877025, 0.746616)
bones/46/rotation = Quaternion(-0.0068379, -0.0231663, 0.958813, -0.283009)
bones/50/rotation = Quaternion(0.860375, -0.037403, 0.00859327, 0.508215)
bones/51/rotation = Quaternion(0.00294566, -0.00202057, 0.0220681, 0.99975)
bones/52/rotation = Quaternion(-0.376207, 0.0213759, 0.0361642, 0.925583)
bones/53/rotation = Quaternion(-0.000237432, 0.891866, -0.452299, -0.000463204)
bones/54/rotation = Quaternion(0.969145, -0.0618578, 0.00647425, 0.238514)
bones/55/rotation = Quaternion(0.587637, -0.0282374, -0.00675066, 0.808604)
bones/56/rotation = Quaternion(-0.206211, 0.00573884, -0.00241833, 0.978488)
bones/57/rotation = Quaternion(0.000238562, 0.891866, -0.452299, 0.000460197)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player"]
shape = SubResource("CapsuleShape3D_player")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="Player"]

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.642788, 0.766044, 0, -0.766044, 0.642788, 0, 25, 35)
fov = 70.0
script = ExtResource("2_camera")
target = NodePath("../Player")
follow_distance = 12.5
camera_height = 7.5
camera_angle = 22.0
metadata/_edit_lock_ = true

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, -0.75, 0.433013, 0, 30, 0)
shadow_enabled = true

[editable path="Obstacles/RigidBody3D/Rock_12"]
[editable path="Obstacles/RigidBody3D/Rock_12/Rock_15"]
[editable path="Obstacles/RigidBody3D/Rock_12/Rock_14"]
[editable path="Obstacles/RigidBody3D/Rock_12/Rock_13"]
[editable path="Player/human-female"]
